(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[263],{947:function(e,t,r){Promise.resolve().then(r.bind(r,7875))},7875:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return V}});var s=r(7437),n=r(2265),a=r(7756),i=r(2381),l=r(9174),o=r(279),c=r(3247),d=r(2489);let u={all:"All",FILE_DETECTED:"Detected",FILE_ORGANIZED:"Organized",FILE_DELETED:"Deleted",DUPLICATE_FOUND:"Duplicates",SYNC_COMPLETED:"Sync",ERROR:"Errors",AI_AUDIT:"AI Audit"};function f(e){let{activeFilter:t,onFilterChange:r,searchQuery:n,onSearchChange:a,counts:f}=e;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(o.I,{placeholder:"Search activity...",value:n,onChange:e=>a(e.target.value),className:"pl-9 pr-9"}),n&&(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>a(""),className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0",children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:["all","FILE_DETECTED","FILE_ORGANIZED","FILE_DELETED","DUPLICATE_FOUND","SYNC_COMPLETED","ERROR","AI_AUDIT"].map(e=>{let n=f[e]||0,a=t===e;return(0,s.jsxs)(i.z,{variant:a?"default":"outline",size:"sm",onClick:()=>r(e),className:a?"shadow-md":"",children:[u[e],n>0&&(0,s.jsx)(l.C,{variant:"secondary",className:"ml-2 px-1.5 py-0 text-xs",children:n})]},e)})})]})}var m=r(8964),x=r(7117),h=r(9219),v=r(91),p=r(6744),g=r(6865),N=r(2222),b=r(875),j=r(407),y=r(6682);let w={FILE_DETECTED:m.Z,FILE_ORGANIZED:x.Z,FILE_DELETED:h.Z,DUPLICATE_FOUND:v.Z,SYNC_COMPLETED:p.Z,ERROR:g.Z,AI_AUDIT:N.Z},E={FILE_DETECTED:"bg-blue-500/10 text-blue-400 border-blue-500/30",FILE_ORGANIZED:"bg-green-500/10 text-green-400 border-green-500/30",FILE_DELETED:"bg-red-500/10 text-red-400 border-red-500/30",DUPLICATE_FOUND:"bg-yellow-500/10 text-yellow-400 border-yellow-500/30",SYNC_COMPLETED:"bg-purple-500/10 text-purple-400 border-purple-500/30",ERROR:"bg-red-500/10 text-red-400 border-red-500/30",AI_AUDIT:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30"};function D(e){var t;let{event:r}=e,[a,o]=(0,n.useState)(!1),c=w[r.type||"FILE_DETECTED"]||m.Z,d=E[r.type||"FILE_DETECTED"]||E.FILE_DETECTED,u=r.timestamp?(0,y.Q)(new Date(r.timestamp),{addSuffix:!0}):"unknown time";return(0,s.jsx)("div",{className:"p-4 rounded-lg border ".concat(d," transition-all hover:shadow-md"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"mt-1 shrink-0",children:(0,s.jsx)(c,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium break-words flex-1",children:r.message}),(0,s.jsx)(l.C,{variant:"outline",className:"shrink-0 text-xs",children:null===(t=r.type)||void 0===t?void 0:t.replace(/_/g," ")})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:u}),r.id&&(0,s.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>o(!a),className:"mt-2 h-6 px-2 text-xs",children:[a?(0,s.jsx)(b.Z,{className:"h-3 w-3 mr-1"}):(0,s.jsx)(j.Z,{className:"h-3 w-3 mr-1"}),a?"Hide":"Show"," Details"]}),a&&(0,s.jsx)("div",{className:"mt-2 pt-2 border-t border-border/50",children:(0,s.jsxs)("div",{className:"text-xs font-mono bg-black/30 p-2 rounded overflow-x-auto",children:[(0,s.jsxs)("div",{children:["ID: ",r.id]}),(0,s.jsxs)("div",{children:["Type: ",r.type]}),(0,s.jsxs)("div",{children:["Timestamp: ",r.timestamp]})]})})]})]})})}var C=r(314),T=r(3448);let I=n.forwardRef((e,t)=>{let{className:r,children:n,...a}=e;return(0,s.jsxs)(C.fC,{ref:t,className:(0,T.cn)("relative overflow-hidden",r),...a,children:[(0,s.jsx)(C.l_,{className:"h-full w-full rounded-[inherit]",children:n}),(0,s.jsx)(_,{}),(0,s.jsx)(C.Ns,{})]})});I.displayName=C.fC.displayName;let _=n.forwardRef((e,t)=>{let{className:r,orientation:n="vertical",...a}=e;return(0,s.jsx)(C.gb,{ref:t,orientation:n,className:(0,T.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...a,children:(0,s.jsx)(C.q4,{className:"relative flex-1 rounded-full bg-border"})})});_.displayName=C.gb.displayName;var R=r(3276),L=r(9227),Z=r(5051);function A(e){let{searchQuery:t="",filterType:r="all"}=e,{events:a,isConnected:o}=function(){let[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=new EventSource("/api/v1/activity/stream");return e.onopen=()=>{s(!0)},e.onmessage=e=>{try{let r=JSON.parse(e.data);t(e=>[r,...e].slice(0,100))}catch(e){console.error("Failed to parse SSE data:",e)}},e.onerror=()=>{s(!1),e.close()},()=>{e.close(),s(!1)}},[]),{events:e,isConnected:r}}(),[c,d]=(0,n.useState)(!1),[u,f]=(0,n.useState)(!0),[m,x]=(0,n.useState)([]),h=(0,n.useRef)(null),v=(0,n.useRef)(null);(0,n.useEffect)(()=>{c||x(a)},[a,c]),(0,n.useEffect)(()=>{u&&v.current&&v.current.scrollIntoView({behavior:"smooth"})},[m,u]);let p=m.filter(e=>{var s;let n="all"===r||e.type===r,a=""===t||(null===(s=e.message)||void 0===s?void 0:s.toLowerCase().includes(t.toLowerCase()));return n&&a});return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.C,{variant:o?"default":"destructive",className:o?"bg-green-600":"",children:o?"Live":"Disconnected"}),c&&(0,s.jsxs)(l.C,{variant:"outline",className:"text-yellow-400 border-yellow-500",children:["Paused (",a.length-m.length," new)"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{c&&x(a),d(!c)},children:[c?(0,s.jsx)(R.Z,{className:"h-4 w-4 mr-2"}):(0,s.jsx)(L.Z,{className:"h-4 w-4 mr-2"}),c?"Resume":"Pause"]}),(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>f(!u),className:u?"bg-accent":"",children:[(0,s.jsx)(Z.Z,{className:"h-4 w-4 mr-2"}),"Auto-scroll"]})]})]}),(0,s.jsx)(I,{className:"h-[600px] rounded-lg border bg-card",ref:h,children:(0,s.jsx)("div",{className:"p-4 space-y-3",children:p.length>0?(0,s.jsxs)(s.Fragment,{children:[p.map((e,t)=>(0,s.jsx)(D,{event:e},"".concat(e.id,"-").concat(t))),(0,s.jsx)("div",{ref:v})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"No activity yet"}),t&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filter"})]})})})]})}var F=r(1713),O=r(180);let S={all:["activity"],list:e=>[...S.all,"list",e]};var k=r(9820),z=r(9140),P=r(4401),U=r(525),M=r(7168);function V(){let[e,t]=(0,n.useState)("all"),[r,i]=(0,n.useState)(""),{data:l,isLoading:o}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return(0,F.a)({queryKey:S.list(e),queryFn:()=>O.hi.get("/activity?limit=".concat(e)),refetchInterval:1e4})}(100),c=(0,n.useMemo)(()=>{if(!(null==l?void 0:l.events))return{};let e={all:l.events.length};return l.events.forEach(t=>{let r=t.type||"UNKNOWN";e[r]=(e[r]||0)+1}),e},[null==l?void 0:l.events]),d=(0,n.useMemo)(()=>(null==l?void 0:l.events)?l.events.filter(t=>{var s;let n="all"===e||t.type===e,a=""===r||(null===(s=t.message)||void 0===s?void 0:s.toLowerCase().includes(r.toLowerCase()));return n&&a}):[],[null==l?void 0:l.events,e,r]);return(0,s.jsx)(a.V,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,s.jsx)(P.Z,{className:"h-8 w-8 text-purple-500"}),"Activity Log"]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Real-time monitoring and historical activity"})]})}),(0,s.jsx)(f,{activeFilter:e,onFilterChange:t,searchQuery:r,onSearchChange:i,counts:c}),(0,s.jsxs)(M.mQ,{defaultValue:"live",className:"w-full",children:[(0,s.jsxs)(M.dr,{className:"grid w-full max-w-md grid-cols-2",children:[(0,s.jsxs)(M.SP,{value:"live",className:"flex items-center gap-2",children:[(0,s.jsx)(U.Z,{className:"h-4 w-4"}),"Live Stream"]}),(0,s.jsxs)(M.SP,{value:"history",className:"flex items-center gap-2",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4"}),"History"]})]}),(0,s.jsx)(M.nU,{value:"live",className:"mt-6",children:(0,s.jsx)(A,{searchQuery:r,filterType:e})}),(0,s.jsx)(M.nU,{value:"history",className:"mt-6",children:o?(0,s.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,s.jsx)(k.Zb,{children:(0,s.jsx)(k.aY,{className:"p-6",children:(0,s.jsx)(z.O,{className:"h-16 w-full"})})},e))}):d.length>0?(0,s.jsx)("div",{className:"space-y-3",children:d.map(e=>(0,s.jsx)(D,{event:e},e.id))}):(0,s.jsx)(k.Zb,{children:(0,s.jsxs)(k.aY,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(P.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"No Activity Found"}),(0,s.jsx)("p",{className:"text-muted-foreground text-center max-w-md",children:r||"all"!==e?"Try adjusting your search or filter.":"Activity will appear here as events occur."})]})})})]})]})})}},7756:function(e,t,r){"use strict";r.d(t,{V:function(){return m}});var s=r(7437),n=r(7648),a=r(3145),i=r(5466),l=r(8867),o=r(2735),c=r(4401),d=r(2057);let u=[{name:"Dashboard",href:"/",icon:i.Z},{name:"Duplicates",href:"/duplicates",icon:l.Z},{name:"Queue",href:"/queue",icon:o.Z},{name:"Activity",href:"/activity",icon:c.Z},{name:"Consolidation",href:"/consolidation",icon:d.Z}];function f(){return(0,s.jsxs)("aside",{className:"w-64 bg-zinc-900 border-r border-zinc-800 h-screen p-4",children:[(0,s.jsxs)("div",{className:"mb-8 flex items-center gap-3",children:[(0,s.jsx)(a.default,{src:"/jellywooch.png",alt:"JellyWatch",width:36,height:36,className:"rounded"}),(0,s.jsx)("h1",{className:"text-xl font-bold",children:"JellyWatch"})]}),(0,s.jsx)("nav",{className:"space-y-2",children:u.map(e=>(0,s.jsxs)(n.default,{href:e.href,className:"flex items-center gap-3 px-3 py-2 rounded-lg text-zinc-400 hover:bg-zinc-800 hover:text-zinc-100",children:[(0,s.jsx)(e.icon,{className:"h-4 w-4"}),e.name]},e.name))})]})}function m(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"flex min-h-screen bg-zinc-950 text-zinc-100",children:[(0,s.jsx)(f,{}),(0,s.jsx)("main",{className:"flex-1 p-6 overflow-auto",children:t})]})}},9174:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var s=r(7437);r(2265);var n=r(535),a=r(3448);let i=(0,n.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...n})}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var s=r(7437),n=r(2265),a=r(7495),i=r(535),l=r(3448);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var s=r(7437),n=r(2265),a=r(3448);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},279:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(7437),n=r(2265),a=r(3448);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},9140:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});var s=r(7437),n=r(3448);function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-primary/10",t),...r})}},7168:function(e,t,r){"use strict";r.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return l},nU:function(){return d}});var s=r(7437),n=r(2265),a=r(4419),i=r(3448);let l=a.fC,o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.aV,{ref:t,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...n})});o.displayName=a.aV.displayName;let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",r),...n})});c.displayName=a.xz.displayName;let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...n})});d.displayName=a.VY.displayName},180:function(e,t,r){"use strict";r.d(t,{hi:function(){return l}});class s extends Error{constructor(e,t,r){super(r),this.status=e,this.code=t,this.name="APIError"}}class n extends Error{constructor(e="Network error"){super(e),this.name="NetworkError"}}class a extends Error{constructor(e="Authentication required"){super(e),this.name="AuthError"}}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat("/api/v1").concat(e);try{let e=await fetch(r,{...t,headers:{"Content-Type":"application/json",...t.headers},credentials:"include"});if(401===e.status)throw new a;if(!e.ok){let t=await e.json().catch(()=>({}));throw new s(e.status,t.code||"UNKNOWN_ERROR",t.message||"HTTP ".concat(e.status))}return e.json()}catch(e){if(e instanceof s||e instanceof a)throw e;if(e instanceof TypeError)throw new n;throw e}}let l={get:e=>i(e,{method:"GET"}),post:(e,t)=>i(e,{method:"POST",body:t?JSON.stringify(t):void 0}),delete:e=>i(e,{method:"DELETE"})}},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a},t:function(){return i}});var s=r(1994),n=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}function i(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(1))," ").concat(["B","KB","MB","GB","TB"][t])}}},function(e){e.O(0,[245,763,145,713,746,798,718,116,971,117,744],function(){return e(e.s=947)}),_N_E=e.O()}]);